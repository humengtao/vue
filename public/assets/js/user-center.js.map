{"version":3,"sources":["user-center.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user-center.js","sourcesContent":["$(function () {\n    var showModal = function (content, color) {\n        $('#reply-modal').modal();\n        $('#reply-info').text(content).css('color', color);\n    }\n\n    // var listenFileUpload = function () {\n    //     $(\"#upload-head\").change(function () {\n    //         var filepath = $(this).val();\n    //         var extStart = filepath.lastIndexOf(\".\");\n    //         var ext = filepath.substring(extStart, filepath.length).toUpperCase();\n    //         if (ext != \".BMP\" && ext != \".PNG\" && ext != \".GIF\" && ext != \".JPG\" && ext != \".JPEG\") {\n    //             $('.alert-danger').fadeIn(500, function () {\n    //                 $('.alert-danger').fadeOut(5000);\n    //             });\n    //         } else {\n    //             $('#form-avater').submit();\n    //         }\n    //     });\n    //\n    //     $(\"#upload-background\").change(function () {\n    //         var filepath = $(this).val();\n    //         var extStart = filepath.lastIndexOf(\".\");\n    //         var ext = filepath.substring(extStart, filepath.length).toUpperCase();\n    //         if (ext != \".BMP\" && ext != \".PNG\" && ext != \".GIF\" && ext != \".JPG\" && ext != \".JPEG\") {\n    //             $('.alert-danger').fadeIn(500, function () {\n    //                 $('.alert-danger').fadeOut(5000);\n    //             });\n    //         } else {\n    //             $('#form-background').submit();\n    //         }\n    //     });\n    // };\n\n    var deleteRecords = function () {\n        $('.records-edit').click(function () {\n            $('.records-badge').toggle();\n            $('.records-remove').toggle();\n        });\n        $('.records-remove').click(function () {\n            var _this = $(this);\n            var id = $(this).data('id');\n            $.ajax('/api/delete-record', {\n                headers: {\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                },\n                type: 'POST',\n                data: {\n                    id: id\n                },\n                success: function () {\n                    console.log(_this);\n                    _this.parent('p').parent('li').fadeOut(200);\n                    modalSuccess();\n                },\n                error: function () {\n                    modalFailed();\n                }\n            });\n        })\n    };\n\n    var deleteArticles = function () {\n        $('.articles-edit').click(function () {\n            $('.articles-badge').toggle();\n            $('.articles-remove').toggle();\n        });\n        $('.articles-remove').click(function () {\n            var _this = $(this);\n            var id = $(this).data('id');\n            $.ajax('/api/delete-article', {\n                headers: {\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                },\n                type: 'POST',\n                data: {\n                    id: id\n                },\n                success: function () {\n                    _this.parent('p').parent('li').fadeOut(200);\n                    $('div[title=\"' + id + '\"]').fadeOut(200);\n                    modalSuccess();\n                },\n                error: function () {\n                    modalFailed();\n                }\n            });\n        })\n    };\n\n    var modalSuccess = function () {\n        showModal('Delete Success !', 'green');\n    };\n\n    var modalFailed = function () {\n        showModal('Delete Failed !', 'red');\n    };\n\n    var validateForm = function () {\n        $('#basic-submit').click(function () {\n            var description = $('#inputDescription').val();\n            if (description.length > 50) {\n                showModal('description most 50 character', 'red');\n            } else {\n                $('#basic-info').submit();\n            }\n        });\n    };\n\n\n    // ajax for updata avatar\n    var listenCropSubmit = function () {\n        $('#cropForm input[type=submit]').click(function (e) {\n            e.preventDefault();\n\n            if($('#x').val()!='')\n                $('#cropForm').submit();\n        });\n    };\n\n    var listenImgChange = function () {\n        $('#img').change(function () {\n            console.log(1);\n            $('#uploader').submit();\n        });\n    };\n\n    var listenImgUpload = function () {\n        $('#uploader').submit(function () {\n            console.log(2);\n            var formData = new FormData($(this)[0]);\n            $.ajax({\n                headers: {\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                },\n                url: '/api/crop',\n                type: 'POST',\n                data: formData,\n                success: function (data) {\n                    console.log(data);\n                    var jcrop_api;\n                    $('#editModal .preview img').attr('src', data);\n                    $('#editModal').modal();\n\n                    $('#cropbox').Jcrop({\n                        aspectRatio: 1,\n                        onSelect: updateCoords,\n                    },function () {\n                        jcrop_api = this;\n                        jcrop_api.animateTo([0,0,100,100]);\n                    });\n\n                    $('#img').val('');\n                },\n                cache: false,\n                contentType: false,\n                processData: false\n            });\n\n            return false;\n        });\n    };\n\n    deleteArticles();\n    deleteRecords();\n    listenCropSubmit();\n    listenImgChange();\n    listenImgUpload();\n    validateForm();\n\n\n// image crop---------------------------------------------------------\n    function updateCoords(c) {\n        $('#x').val(c.x);\n        $('#y').val(c.y);\n        $('#w').val(c.w);\n        $('#h').val(c.h);\n    }\n\n\n// image crop---------------------------------------------------------\n\n});\n\n\n"],"sourceRoot":"/source/"}